<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>vntyper-online</title>  
  
  <!-- Favicon Links -->
  <link rel="icon" type="image/png" href="ressources/assets/favicon/favicon-48x48.png" sizes="48x48" />
  <link rel="icon" type="image/svg+xml" href="ressources/assets/favicon/favicon.svg" />
  <link rel="shortcut icon" href="ressources/assets/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="ressources/assets/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="ressources/assets/favicon/site.webmanifest" />

  <!-- Include Aioli from BioWasm CDN with Subresource Integrity (SRI) -->
  <script src="https://biowasm.com/cdn/v3/aioli.js"
          integrity="sha384-1Ergza974F0w12B/lIP0OD/cMzMizVolHbzSX1Jlmour//ypy41MIN8qYeHl45Jz"
          crossorigin="anonymous" defer></script>
  
  <!-- Link to External CSS -->
  <link rel="stylesheet" href="ressources/css/style.css">
  
  <!-- Link to Config JS -->
  <script src="ressources/js/config.js" defer></script>
  
  <!-- Link to Input Wrangling JS -->
  <script type="module" src="ressources/js/inputWrangling.js" defer></script>
  
  <!-- Link to API Interactions JS -->
  <script type="module" src="ressources/js/apiInteractions.js" defer></script>
  
  <!-- Link to BAM Processing JS -->
  <script type="module" src="ressources/js/bamProcessing.js" defer></script>
  
  <!-- Link to Main JS -->
  <script type="module" src="ressources/js/main.js" defer></script>
</head>
<body>
  <div class="container">
    <!-- Header Section with Logo and Title -->
    <div class="header">
      <img src="ressources/assets/logo/vntyperonline_logo_80px.png" alt="vntyper-online Logo" class="logo">
      <h2>vntyper-online</h2>
    </div>

    <!-- File Input Container -->
    <div class="file-input">
      <label for="bamFiles">Select BAM and BAI Files:</label>
      <input id="bamFiles" type="file" accept=".bam,.bai" multiple />
      <small>Select corresponding BAM and BAI files. Each BAM file should have a matching BAI file (e.g., test.bam and test.bam.bai or test.bai).</small>
    </div>

    <!-- Region Select Dropdown -->
    <div class="region-select">
      <label for="region">Select Region:</label>
      <select id="region">
        <option value="" disabled selected>Select a region</option>
        <option value="chr1:155158000-155163000">MUC1 Locus (hg19): chr1:155158000-155163000</option>
        <option value="chr1:155184000-155194000" selected>MUC1 Locus (hg38): chr1:155184000-155194000</option>
      </select>
    </div>

    <!-- API-Based Job Submission -->
    <button id="submitBtn">Submit Job</button>

    <!-- Old BAM Processing Button -->
    <button id="extractBtn">Extract Region</button>

    <!-- Output and Error Containers -->
    <div id="output">
      <!-- Job Information and Status -->
      <div id="jobOutput">
        <div id="jobInfo"></div>
        <div id="jobStatus"></div>

        <!-- Spinner and Countdown -->
        <div id="spinner" class="spinner hidden" aria-label="Loading" role="status"></div>
        <div id="countdown" class="countdown"></div>
      </div>
      
      <!-- Region Extraction Output -->
      <div id="regionOutput"></div>
    </div>
    <div id="error" class="error"></div>
  </div>
  
  <!-- Footer Section -->
  <footer class="footer">
    <div class="footer-content">
      <!-- Dynamic Institution Logos -->
      <div class="institution-logos" id="institutionLogos">
        <!-- Logos will be injected here by JavaScript -->
      </div>
      
      <!-- Dynamic Footer Links (Optional) -->
      <div class="footer-links" id="footerLinks">
        <!-- Links can be injected here if needed -->
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; <span id="currentYear"></span> vntyper-online. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
