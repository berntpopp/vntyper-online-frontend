<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>vntyper-online</title>  
  
  <!-- Viewport Meta Tag -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Meta Description -->
  <meta name="description" content="vntyper-online offers online MUC1 VNTR genotyping using the vntyper algorithm.">
  
  <!-- Canonical Link -->
  <link rel="canonical" href="https://vntyper.org/" />

  <!-- Favicon Links -->
  <link rel="icon" type="image/png" href="ressources/assets/favicon/favicon-48x48.png" sizes="48x48" />
  <link rel="icon" type="image/svg+xml" href="ressources/assets/favicon/favicon.svg" />
  <link rel="shortcut icon" href="ressources/assets/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="ressources/assets/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="ressources/assets/favicon/site.webmanifest" />

  <!-- Intro.js CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/4.0.0/introjs.min.css" integrity="sha512-631ugrjzlQYCOP9P8BOLEMFspr5ooQwY3rgt8SMUa+QqtVMbY/tniEUOcABHDGjK50VExB4CNc61g5oopGqCEw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Link to CSS Files -->
  <link rel="stylesheet" href="ressources/css/base.css">
  <link rel="stylesheet" href="ressources/css/navbar.css">
  <link rel="stylesheet" href="ressources/css/drag-drop.css">
  <link rel="stylesheet" href="ressources/css/forms.css">
  <link rel="stylesheet" href="ressources/css/buttons.css">
  <link rel="stylesheet" href="ressources/css/ui-components.css">
  <link rel="stylesheet" href="ressources/css/output.css">
  <link rel="stylesheet" href="ressources/css/modal.css">
  <link rel="stylesheet" href="ressources/css/faq.css">
  <link rel="stylesheet" href="ressources/css/citations.css">
  <link rel="stylesheet" href="ressources/css/footer.css">
  
  <!-- Link to Drag & Drop CSS -->
  <link rel="stylesheet" href="ressources/css/drag-drop.css">

  <!-- Intro.js JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/4.0.0/intro.min.js" integrity="sha512-+hhhH0eKqYCmXsO28OJE1HHWkgNYwlpceBwmeeDEt5jpCL8jOuqAVunXlZ/WZ4qIluJdwlcv4f5BUIQ/l1w9iw==" crossorigin="anonymous" referrerpolicy="no-referrer" defer></script>

  <!-- Include Aioli from BioWasm CDN with Subresource Integrity (SRI) -->
  <script src="https://biowasm.com/cdn/v3/aioli.js"
          integrity="sha384-1Ergza974F0w12B/lIP0OD/cMzMizVolHbzSX1Jlmour//ypy41MIN8qYeHl45Jz"
          crossorigin="anonymous" defer></script>
  
  <!-- Link to Config JS -->
  <script src="ressources/js/config.js" defer></script>
  
  <!-- Link to Input Wrangling JS -->
  <script type="module" src="ressources/js/inputWrangling.js" defer></script>
  
  <!-- Link to Regions Config JS -->
  <script type="module" src="ressources/js/regionsConfig.js" defer></script>
  
  <!-- Link to Assembly Configs JS -->
  <script type="module" src="ressources/js/assemblyConfigs.js" defer></script>
  
  <!-- Link to BAM Processing JS -->
  <script type="module" src="ressources/js/bamProcessing.js" defer></script>
  
  <!-- Link to API Interactions JS -->
  <script type="module" src="ressources/js/apiInteractions.js" defer></script>
  
  <!-- Link to Main JS -->
  <script type="module" src="ressources/js/main.js" defer></script>
  
  <!-- Link to Modal JS -->
  <script type="module" src="ressources/js/modal.js" defer></script>
  
  <!-- Link to Populate Regions JS -->
  <script type="module" src="ressources/js/populateRegions.js" defer></script>

  <!-- Link to UI Utils JS -->
  <script type="module" src="ressources/js/uiUtils.js" defer></script>

  <!-- Version and Current Year Script -->
  <script src="ressources/js/version.js" defer></script>

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "name": "vntyper-online",
      "url": "https://vntyper.org/",
      "description": "vntyper-online offers comprehensive genetic variant analysis and visualization tools to support researchers and clinicians in genomics studies.",
      "publisher": {
        "@type": "Person",
        "name": "Bernt Popp",
        "url": "https://berntpopp.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://vntyper.org/ressources/assets/logo/vntyperonline_logo_80px.png"
        }
      },
      "creator": [
        {
          "@type": "Person",
          "name": "Bernt Popp",
          "url": "https://berntpopp.com",
          "sameAs": [
            "https://github.com/berntpopp"
          ]
        },
        {
          "@type": "Person",
          "name": "Hassan Saei",
          "url": "https://github.com/hassansaei"
        }
      ]
    }
  </script>

</head>
<body>

  <div class="container" id="home">
    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="navbar-container">
        <div class="header">
          <img src="ressources/assets/logo/vntyperonline_logo_80px.png" alt="vntyper-online Logo" class="logo">
          <h2>vntyper-online</h2>
        </div>

        <!-- Navigation Links -->
        <ul class="navbar-menu">
          <li><a href="#" class="navbar-link" data-modal="faqModal">FAQ</a></li>
          <li><a href="#" id="startTutorialBtn" class="navbar-link">Tutorial</a></li>
          <li><a href="/api/docs" class="navbar-link" target="_blank" aria-label="OpenAPI Documentation">API</a></li>
          
          <!-- Server Load Indicator -->
          <li id="serverLoadIndicator" class="server-load-indicator">
            <a href="#" class="navbar-link" aria-label="Current Server Load">
              <span id="serverLoadText">Jobs: </span>
              <span id="totalJobsInQueue" class="load-count">0</span>
            </a>
          </li>

          <!-- Disclaimer Indicator -->
          <li id="disclaimerIndicator" data-intro="Click here to view the disclaimer again." data-step="6">
            <a href="#" id="disclaimerLink" class="navbar-link" aria-label="View Disclaimer Status">
              <span id="disclaimerStatusIcon" class="status-icon" aria-hidden="true">✔️</span>
              <span id="disclaimerStatusText" class="status-text">Disclaimer</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Drag & Drop File Input Container -->
    <div class="drag-drop-container" data-intro="Upload your BAM and BAI files here. Each BAM file should have a corresponding BAI file." data-step="1">
      <label class="drag-drop-label" for="bamFiles">Upload sequencing files:</label>
      
      <div
        id="dropArea"
        class="drag-drop-area"
        tabindex="0"
        role="button"
        aria-label="File Upload Area"
      >
        <p>Drag & drop corresponding BAM and BAI files.</p>
        <input
          type="file"
          id="bamFiles"
          accept=".bam,.bai"
          multiple
          class="drag-drop-input"
        />
        <!-- Container to display selected files -->
        <div id="fileList" class="file-list">
          <p>No files selected.</p>
        </div>
      </div>
    </div>

    <!-- Region Select Dropdown -->
    <div class="region-select" data-intro="Select the reference assembly used for your alignment. The region will be selected accordingly." data-step="2">
      <label for="region">Select reference:</label>
      <select id="region" class="form-select">
        <option value="guess" selected>Guess assembly</option>
        <!-- Options will be populated dynamically -->
      </select>
    </div>

    <!-- Button Group: Submit, Extract, Show Options -->
    <div class="button-group" data-intro="Submit your job, extract regions, or provide additional optional inputs." data-step="3">
      <button id="submitBtn" class="submit-button button" data-intro="Click here to submit your job for analysis. The MUC1 read data will be extracted on your device and only this subset will be uploaded for analysis." data-step="3">Submit Job</button>
      <button id="extractBtn" class="extract-button button" data-intro="Use this button to extract regions from your BAM files in your browser and save the subset BAM file." data-step="4">Extract Region</button>
      <button id="toggleOptionalInputs" class="toggle-button button" aria-expanded="false" aria-controls="additionalInputs">Show Options</button>
    </div>

    <!-- Optional Inputs: Hidden by Default -->
    <div id="additionalInputs" class="additional-inputs hidden">
      <label for="email">Email:</label>
      <input 
        type="email" 
        id="email" 
        name="email" 
        class="form-input" 
        placeholder="your.email@example.com" 
        aria-label="Email for notifications"
      >

      <label for="cohortAlias">Cohort alias:</label>
      <input 
        type="text" 
        id="cohortAlias" 
        name="cohortAlias" 
        class="form-input" 
        placeholder="My cohort" 
        aria-label="Cohort Alias"
      >
      
      <label for="passphrase">Pass:</label>
      <input 
        type="password" 
        id="passphrase" 
        name="passphrase" 
        class="form-input" 
        placeholder="Password" 
        aria-label="Passphrase for cohort creation"
      >
    </div>

    <!-- Output and Error Containers -->
    <div id="output" data-intro="Here you will see the status and results of your job." data-step="5">
      <!-- Message Display -->
      <div id="message" class="message hidden"></div>

      <!-- Job Information and Status -->
      <div id="jobOutput">
        <div id="jobInfo"></div>
        <div id="jobStatus"></div>
        <div id="jobQueuePosition"></div>
        <!-- Spinner and Countdown -->
        <div id="spinner" class="spinner hidden" aria-label="Loading" role="status"></div>
        <div id="countdown" class="countdown"></div>
      </div>
      
      <!-- Region Extraction Output -->
      <div id="regionOutput" class="region-output"></div>
    </div>
    <div id="error" class="error d-none hidden"></div>
  </div>

  <!-- Citations Section -->
  <section id="citations" class="citations-section">
    <div class="citations-container">
      <div class="citation-item">
        <p>
          <strong>Please cite:</strong> Saei H, et al. VNtyper enables accurate alignment-free genotyping of MUC1 coding VNTR using short-read sequencing data in autosomal dominant tubulointerstitielle nierenerkrankung. <strong>iScience</strong>. 2023 Jun 17;26(7):107171. doi: <a href="https://doi.org/10.1016/j.isci.2023.107171" target="_blank">10.1016/j.isci.2023.107171</a>. PMID: <a href="https://pubmed.ncbi.nlm.nih.gov/37456840/" target="_blank">37456840</a>; PMCID: <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10338300/" target="_blank">PMC10338300</a>.
        </p>
      </div>
      <!-- Add more citation items as needed -->
    </div>
  </section>

  <!-- Footer Section -->
  <footer class="footer">
    <div class="footer-content">
      <!-- Dynamic Institution Logos -->
      <div class="institution-logos" id="institutionLogos">
        <!-- Logos will be injected here by JavaScript -->
      </div>
      
      <!-- Dynamic Footer Links -->
      <div class="footer-links" id="footerLinks">
        <a href="#" class="navbar-link" data-modal="faqModal">FAQ</a>
        <a href="#citations">Citations</a>
        <!-- Updated GitHub Link -->
        <a href="https://github.com/berntpopp/vntyper-online-backend" class="navbar-link" target="_blank" rel="noopener noreferrer" aria-label="GitHub Repository">GitHub</a>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; <span id="currentYear"></span> vntyper-online. All rights reserved.</p>
      <!-- Version Information -->
      <p>
        Frontend version: <span id="appVersion"></span> |
        API version: <span id="apiVersion"></span> |
        Tool version: <span id="toolVersion"></span>
      </p>
      <!-- Added Imprint and Contact Links Below Version Info -->
      <p>
        <a href="impressum_en.html" target="_blank" aria-label="Imprint">Imprint</a> | 
        <a href="contact.html" target="_blank" aria-label="Contact">Contact</a> | 
        <a href="https://github.com/berntpopp/vntyper-online-backend" target="_blank" rel="noopener noreferrer" aria-label="GitHub Repository">GitHub</a>
      </p>
    </div>
  </footer>

  <!-- Disclaimer Modal -->
  <div id="disclaimerModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="disclaimerTitle" aria-describedby="disclaimerDescription">
    <div class="modal-overlay"></div> <!-- Overlay background -->
    <div class="modal-content">
      <button class="modal-close" aria-label="Close Disclaimer Modal">&times;</button>
      <h2 id="disclaimerTitle">Disclaimer</h2>
      <p id="disclaimerDescription">
        <strong>Important Information</strong><br>
        vntyper-online is intended for educational and research purposes only. It is not a substitute for professional medical advice and should not be used for clinical decision-making.
      </p>
      <p>
        <strong>Usage Guidelines</strong><br>
        The results provided by this tool should not be used as a basis for diagnosis or treatment without consulting a healthcare professional.
      </p>
      <button id="agreeBtn" class="agree-button">I Agree</button>
    </div>
  </div>

  <!-- FAQ Modal -->
  <div id="faqModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="faqTitle" aria-describedby="faqDescription" aria-hidden="true">
    <div class="modal-overlay"></div> <!-- Overlay background -->
    <div class="modal-content">
      <button class="modal-close" aria-label="Close FAQ Modal">&times;</button>
      <h2 id="faqTitle">Frequently Asked Questions</h2>
      <div id="faqDescription" class="faq-container">
        <div class="faq-item">
          <h3>What is vntyper-online?</h3>
          <p>vntyper-online offers online MUC1 VNTR genotyping using the vntyper algorithm.</p>
        </div>
        <div class="faq-item">
          <h3>How do I upload my data?</h3>
          <p>You can upload your BAM and BAI files using the file input section on the Home page. Ensure that each BAM file has a corresponding BAI file (e.g., test.bam and test.bam.bai or test.bai).</p>
        </div>
        <div class="faq-item">
          <h3>Is my data secure?</h3>
          <p>The website https://vntyper.org/ uses SSL/HTTPS protocols with strong encryption and gets a high score for its security implementation (<a href="https://developer.mozilla.org/en-US/observatory/analyze?host=vntyper.org" target="_blank">Mozilla Observatory A+ rating</a>).
            Additionally, only a small fraction of the BAM file is uploaded, preserving privacy and even this read data is immediately deleted after computation.
            Results are kept for 7 days and then deleted from the server.
          </p>
        </div>
        <div class="faq-item">
          <h3>What regions can I analyze?</h3>
          <p>Select the reference assembly used for your alignment. The region corresponding to MUC1 Locus will be automatically selected.</p>
        </div>
        <div class="faq-item">
          <h3>How can I track the status of my job?</h3>
          <p>After submitting a job, the status will be displayed in the output section. You can also download the results once the job is complete.</p>
        </div>
        <!-- Add more FAQ items as needed -->
      </div>
    </div>
  </div>

</body>
</html>
